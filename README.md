<p align="center">
  <a href="" rel="noopener">
</p>

<h1 align="center">Terraform Push</h1>

<div align="center">

  [![Status](https://img.shields.io/badge/status-active-success.svg)]() 
  [![GitHub Issues](https://img.shields.io/github/issues/MassimilianoDH/terraform-push.svg)](https://github.com/MassimilianoDH/terraform-push/issues)
  [![GitHub Pull Requests](https://img.shields.io/github/issues-pr/MassimilianoDH/terraform-push.svg)](https://github.com/MassimilianoDH/terraform-push/issues)
  [![License](https://img.shields.io/badge/license-MIT-blue.svg)](/LICENSE)

</div>

---

<p align="center"> This is Terraform Push, a completely automated multi-cloud GitOps CI for Terraform.
    <br> 
</p>

## üìù Table of Contents
- [About](#about)
- [Getting Started](#getting_started)
- [Deployment](#deployment)
- [Usage](#usage)
- [TODO](../master/TODO.md)
- [Built Using](#built_using)
- [Authors](#authors)
- [Acknowledgments](#acknowledgement)

## üßê About Terraform Push <a name = "about"></a>
Terraform Push is an completely automated continuous integration repository template for deploying Terraform configuration files into a single or multi-cloud project. Setup is minimal, only add credentials for cloud authentication as Github secrets. Afterwards you will be able to drop Terraform configuration files into terraform-push/stacks, push them to master and it will be applied automatically.

## üèÅ Pre-Requisites <a name = "getting_started"></a>
Working cloud provider account.

## üöÄ Deployment <a name = "deployment"></a>
### Repository <a name = "repository"></a>
The first step of our process is to create a Github Repository using Terraform Push as a template. On the top right corner of this repo (Terraform Push), you will find a green button to use this template. Press it and follow the repository creation form.

### Bootstrap <a name = "bootstrap"></a>
After our codebase is created, we will need to Bootstrap our remote backend using the Terraform configuration file found inside our repo. Since this backend won't require any changes afterwards, I would suggest deleting the local state for safety reasons.

### Secrets <a name = "secrets"></a>
Add the Github Actions secrets required for authentication. On the newly created repo go to Settings, then Secrets and Actions. Press New repository secret and add the following secrets:

GCP_SERVICE_ACCOUNT_KEY: Service account key generated by Google Cloud. More information on how to [Create and Manage Service Account Keys](https://cloud.google.com/iam/docs/creating-managing-service-account-keys).

SSH_PRIVATE_KEY: SSH key pair used to log into private Terraform Module repositories. More information on [Connecting to GitHub with SSH](https://docs.github.com/en/authentication/connecting-to-github-with-ssh).

PAT_TOKEN: Personal Access Token used to log into PRs and comment Terraform Plan output. More information on [Creating a Personal Access Token](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token).

### Machine User (optional) <a name = "machine_user"></a>
To get our Terraform Plan outputs in a easy to access manner, these need to be posted as a comment on Pull Requests.  This can be done using your personal Github Account (not recommended) or it can be done using a Github Machine User. A machine user is no more than a dummy GitHub account that is granted write access on a per-repository basis. Use this account when adding [PAT_TOKEN](###secrets).

## üéà Usage <a name="usage"></a>
Add notes about how to use the system.

## ‚õèÔ∏è Built Using <a name = "built_using"></a>
- [GitOps](https://about.gitlab.com/topics/gitops/) - Base
- [Github Actions](https://github.com/features/actions/) - Pipeline
- [GNU Bash](https://www.gnu.org/software/bash/) - Scripting
- [jq](https://stedolan.github.io/jq/) - Scripting
- [Hashicorp Terraform](https://www.terraform.io/)) - Base
- [Google Cloud](https://cloud.google.com/) - Cloud
- [Microsoft Azure](https://azure.microsoft.com/en-us/) - Cloud
- [Amazon Web Services](https://aws.amazon.com/) - Cloud
- [GNU Make](https://www.gnu.org/software/make/manual/make.html)

## ‚úçÔ∏è Authors <a name = "authors"></a>
- [@MassimilianoDH](https://github.com/MassimilianoDH) - Idea & Initial Work

See also the list of [contributors](https://github.com/MassimilianoDH/terraform-push/contributors) who participated in this project.

## üéâ Acknowledgements <a name = "acknowledgement"></a>
- Hat tip to anyone whose code was used